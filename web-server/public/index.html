<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Pomelo
    </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta http-equiv="content-scripte-type" content="text/javascript" />
    <meta name="author" content="netease" />
    <meta name="version" content="1.0" />
    <meta name="keywords" content="pomelo" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <script src="js/lib/build/build.js" type="text/javascript"></script>
    <script type="text/javascript">
      require('boot');
    </script> 
    <script type="text/javascript">
      var pomelo = window.pomelo;
      var host = "120.55.61.144";
      host = "127.0.0.1"
      var queryEntry = function(callback) {
        var route = 'gate.gateHandler.queryClientEntry';
        pomelo.init({
          host: host,
          port: "3910",
          log: true
        }, function(data) {
          console.log("!!!!!")
          console.log(data)
          pomelo.request(route, {}, function(data) {
            pomelo.disconnect();
            if(data.code === 500) {
              console.log(data)
              return;
            }
            callback(host, data.port);
          });
        });
      };
      function entry(unionid) {
        queryEntry(function(host,port) {
          pomelo.init({
            host: host,
            port: port,
            log: true
          },function() {
            pomelo.request("connector.entryHandler.entryAccount",{unionid : unionid}, function(data) {
                console.log(data);
            });
          });
        })
      }
      pomelo.on("close",function(reason) {
        console.log("close",reason)
      })
      pomelo.on("onMessage",function(data) {
        console.log("onMessage")
        console.log(data)
      })
      pomelo.on("onChat",function(data) {
        console.log("onChat")
        console.log(data)
      })
      //============神器================//
      //神器激活
      var artifactActivate = function(aId) {
        pomelo.request("area.heroHandler.artifactActivate", {aId : aId}, function(data) {
            console.log(data);
        });
      }
      //神器进阶
      var artifactAdvance = function(aId) {
        pomelo.request("area.heroHandler.artifactAdvance", {aId : aId}, function(data) {
            console.log(data);
        });
      }
      //神器升星
      var artifactStar = function(aId) {
        pomelo.request("area.heroHandler.artifactStar", {aId : aId}, function(data) {
            console.log(data);
        });
      }
      //穿戴神器
      var dressedArtifact = function(aId) {
        pomelo.request("area.heroHandler.dressedArtifact", {aId : aId}, function(data) {
            console.log(data);
        });
      }
      //拆卸神器
      var takeofArtifact = function(type) {
        pomelo.request("area.heroHandler.takeofArtifact", {type : type}, function(data) {
            console.log(data);
        });
      }
      //============伙伴================//
      //伙伴升星
      var partnerUpgradeStar = function(characterId) {
        pomelo.request("area.partnerHandler.partnerUpgradeStar", {characterId : characterId}, function(data) {
            console.log(data);
        });
      }
      //激活伙伴
      var activatePartner = function(characterId) {
        pomelo.request("area.partnerHandler.activatePartner", {characterId : characterId}, function(data) {
            console.log(data);
        });
      }
      //获取已获得转生被动技能列表
      var getLearnPassiveList = function(characterId,samsara) {
        pomelo.request("area.partnerHandler.getLearnPassiveList", {characterId : characterId,samsara : samsara}, function(data) {
            console.log(data);
        });
      }
      //重置转生技能
      var resetLearnPassive = function(characterId,samsara) {
        pomelo.request("area.partnerHandler.resetLearnPassive", {characterId : characterId,samsara : samsara}, function(data) {
            console.log(data);
        });
      }
      //学习转生被动技能
      var learnPassive = function(characterId,samsara,index) {
        pomelo.request("area.partnerHandler.learnPassive", {characterId : characterId,samsara : samsara,index : index}, function(data) {
            console.log(data);
        });
      }
      //============宝石================//
      //获取宝石列表
      var getGemList = function() {
        pomelo.request("area.gemHandler.getGemList", {}, function(data) {
            console.log(data);
        });
      }
      //购买宝石
      var buyGem = function(gId,level,count) {
        pomelo.request("area.gemHandler.buyGem", {gId : gId,level : level,count : count}, function(data) {
            console.log(data);
        });
      }
      //出售宝石
      var sellGem = function(glist) {
        pomelo.request("area.gemHandler.sellGem", {glist : glist}, function(data) {
            console.log(data);
        });
      }
      //镶嵌宝石
      var inlayGem = function(eId,slot,gstr) {
        pomelo.request("area.gemHandler.inlayGem", {eId : eId,slot : slot,gstr : gstr}, function(data) {
            console.log(data);
        });
      }
      //卸下宝石
      var takeofGem = function(eId,slot) {
        pomelo.request("area.gemHandler.takeofGem", {eId : eId,slot : slot}, function(data) {
            console.log(data);
        });
      }
      //合成宝石
      var compoundGem = function(gId,level,glist) {
        pomelo.request("area.gemHandler.compoundGem", {gId : gId,level : level,glist : glist}, function(data) {
            console.log(data);
        });
      }
      //============邮件================//
      //邮件列表
      var getMailList = function() {
        pomelo.request("area.mailHandler.getMailList", {}, function(data) {
            console.log(data);
        });
      }
      //发送邮件
      var sendMail = function(title,text,atts) {
        pomelo.request("area.mailHandler.sendMail", {title : title,text : text,atts : atts}, function(data) {
            console.log(data);
        });
      }
      //领取邮件附件
      var gainMailAttachment = function(index,id) {
        pomelo.request("area.mailHandler.gainMailAttachment", {index : index,id : id}, function(data) {
            console.log(data);
        });
      }
      //阅读邮件
      var readMail = function(index,id) {
        pomelo.request("area.mailHandler.readMail", {index : index,id : id}, function(data) {
            console.log(data);
        });
      }
      //删除邮件
      var deleteMail = function(index,id) {
        pomelo.request("area.mailHandler.deleteMail", {index : index,id : id}, function(data) {
            console.log(data);
        });
      }
      //一键领取
      var gainAllMailAttachment = function() {
        pomelo.request("area.mailHandler.gainAllMailAttachment", {}, function(data) {
            console.log(data);
        });
      }
      //一键删除已读
      var deleteAllReadMail = function() {
        pomelo.request("area.mailHandler.deleteAllReadMail", {}, function(data) {
            console.log(data);
        });
      }
      //============装备================//
      //可穿戴装备洗练
      var wearableWash = function(wId,locks) {
        pomelo.request("area.equipHandler.wearableWash", {wId : wId,locks : locks}, function(data) {
            console.log(data);
        });
      }
      //已穿戴装备洗练
      var dressedWash = function(eId,locks) {
        pomelo.request("area.equipHandler.dressedWash", {eId : eId,locks : locks}, function(data) {
            console.log(data);
        });
      }
      //穿戴装备
      var dressedEquip = function(wId) {
        pomelo.request("area.equipHandler.dressedEquip", {wId : wId}, function(data) {
            console.log(data);
        });
      }
      //卸下装备
      var takeofEquip = function(eId) {
        pomelo.request("area.equipHandler.takeofEquip", {eId : eId}, function(data) {
            console.log(data);
        });
      }
      //强化装备
      var equipIntensify = function(eId) {
        pomelo.request("area.equipHandler.equipIntensify", {eId : eId}, function(data) {
            console.log(data);
        });
      }
      //获取装备池列表
      var getEquipList = function() {
        pomelo.request("area.equipHandler.getEquipList", {}, function(data) {
            console.log(data);
        });
      }
      //获取可穿戴装备列表
      var getWearableList = function() {
        pomelo.request("area.equipHandler.getWearableList", {}, function(data) {
            console.log(data);
        });
      }
      //获得装备池装备
      var addEquip = function(eId,samsara,quality) {
        pomelo.request("area.equipHandler.addEquip", {eId : eId,samsara : samsara,quality : quality}, function(data) {
            console.log(data);
        });
      }
      //合成装备
      var compoundEquip = function(eId,samsara,quality) {
        pomelo.request("area.equipHandler.compoundEquip", {eId : eId,samsara : samsara,quality : quality}, function(data) {
            console.log(data);
        });
      }
      //批量分解装备
      var resolveEquip = function(elist) {
        pomelo.request("area.equipHandler.resolveEquip", {elist}, function(data) {
            console.log(data);
        });
      }
      //兑换装备
      var buyEquip = function(eId,samsara) {
        pomelo.request("area.equipHandler.buyEquip", {eId : eId,samsara : samsara}, function(data) {
            console.log(data);
        });
      }
      //转换可穿戴装备
      var changeWearable = function(eId,samsara,quality) {
        pomelo.request("area.equipHandler.changeWearable", {eId : eId,samsara : samsara,quality : quality}, function(data) {
            console.log(data);
        });
      }
      //可穿戴转换回装备池
      var changeEquip = function(wId) {
        pomelo.request("area.equipHandler.changeEquip", {wId : wId}, function(data) {
            console.log(data);
        });
      }
      //=========================================//
      //获取服务器列表
      var getAreaList = function(index) {
        pomelo.request("connector.loginHandler.getAreaList", {index : index}, function(data) {
            console.log(data);
        });
      }
      //选择服务器
      var chooseArea = function(areaId) {
        pomelo.request("connector.loginHandler.chooseArea", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //获取该服务器角色信息
      var getPlayerInfo = function(areaId) {
        pomelo.request("connector.loginHandler.getPlayerInfo", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      var getPlayerInfo2 = function() {
        pomelo.request("area.petHandler.getPlayerInfo", {}, function(data) {
            console.log(data);
        });
      }
      //注册角色
      var register = function(areaId,name) {
        pomelo.request("connector.loginHandler.register", {areaId : areaId,name : name}, function(data) {
            console.log(data);
        });
      }
      //登录服务器
      var loginArea = function(areaId) {
        pomelo.request("connector.loginHandler.loginArea", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //获取所处服务器
      var getLocationAreaId = function() {
        pomelo.request("connector.loginHandler.getLocationAreaId", {}, function(data) {
            console.log(data);
        });
      }
      //加入聊天室
      var joinChatRoom = function(roomName) {
        pomelo.request("chat.chatHandler.joinChatRoom",{roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      //离开聊天室
      var leaveChatRoom = function(roomName) {
        pomelo.request("chat.chatHandler.leaveChatRoom",{roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      //发送聊天消息
      var say = function(roomName,text) {
        pomelo.notify("chat.chatHandler.say",{roomName : roomName,text : text}, function(data) {
            console.log(data);
        });
      }
      //激活管理员模式
      var activatePrivileges = function() {
        pomelo.request("admin.adminHandler.activatePrivileges", {}, function(data) {
            console.log(data);
        });
      }
      //发放物品
      var sendItem = function(target,itemId,value) {
        pomelo.request("area.adminArea.sendItem", {target : target,itemId : itemId,value : value}, function(data) {
            console.log(data);
        })
      }
      var openArea = function() {
        pomelo.request("admin.adminHandler.openArea", {}, function(data) {
            console.log(data);
        });
      }
      //获取服务器信息
      var getAreaServerInfos = function() {
        pomelo.request("admin.adminHandler.getAreaServerInfos", {}, function(data) {
            console.log(data);
        });
      }
      //获取服务器成员
      var getAreaPlayers = function(areaId) {
        pomelo.request("admin.adminHandler.getAreaPlayers", {areaId : areaId}, function(data) {
            console.log(data);
        });
      }
      //获取聊天室列表
      var getChatRooms = function() {
        pomelo.request("chat.adminChat.getChatRooms", {}, function(data) {
            console.log(data);
        });
      }
      //获取聊天室成员
      var getMembers = function(roomName) {
        pomelo.request("chat.adminChat.getMembers", {roomName : roomName}, function(data) {
            console.log(data);
        });
      }
      //准备战斗
      var readyFight = function() {
        pomelo.request("area.fightHandler.readyFight",{}, function(data) {
            console.log(data);
        })
      }
      var challengeCheckpoints = function(seededNum,readList) {
        pomelo.request("area.fightHandler.challengeCheckpoints",{seededNum : seededNum,readList : readList}, function(data) {
            console.log(data);
        })
      }
      var getCheckpointsInfo = function() {
        pomelo.request("area.fightHandler.getCheckpointsInfo",{}, function(data) {
            console.log(data);
        })
      }
      //otps包含  itemId   value 及使用物品其他参数   如经验丹需characterId
      var useItem = function(otps) {
        pomelo.request("area.normalHandler.useItem",otps, function(data) {
            console.log(data);
        })
      }
      //增加背包物品  测试功能
      var addItem = function(itemId,value) {
        pomelo.request("area.normalHandler.addItem",{itemId : itemId,value : value}, function(data) {
            console.log(data);
        })
      }
      //增加物品str  测试功能
      var addItemStr = function(str,rate) {
        pomelo.request("area.normalHandler.addItemStr",{str : str,rate : rate}, function(data) {
            console.log(data);
        })
      }
      //获取在线挂机奖励
      var getOnhookAward = function() {
        pomelo.request("area.normalHandler.getOnhookAward",{}, function(data) {
            console.log(data);
        })
      }
      var test = function(items) {
        pomelo.request("area.normalHandler.test",{items : items}, function(data) {
            console.log(data);
        })
      }
      //角色进阶
      var characterAdvanced = function(characterId) {
        pomelo.request("area.normalHandler.characterAdvanced",{characterId : characterId}, function(data) {
            console.log(data);
        })
      }
      //宠物进阶
      var petAdvanced = function(id) {
        pomelo.request("area.petHandler.petAdvanced",{id : id}, function(data) {
            console.log(data);
        })
      }
      //角色转生
      var characterSamsara = function(characterId) {
        pomelo.request("area.normalHandler.characterSamsara",{characterId : characterId}, function(data) {
            console.log(data);
        })
      }
      //宠物转生
      var petSamsara = function(id) {
        pomelo.request("area.petHandler.petSamsara",{id : id}, function(data) {
            console.log(data);
        })
      }
      //增加宠物栏
      var addPetAmount = function() {
        pomelo.request("area.petHandler.addPetAmount",{}, function(data) {
            console.log(data);
        })
      }
      //获得宠物
      var obtainPet = function(characterId) {
        pomelo.request("area.petHandler.obtainPet",{characterId : characterId}, function(data) {
            console.log(data);
        })
      }
      //移除宠物
      var removePet = function(id) {
        pomelo.request("area.petHandler.removePet",{id : id}, function(data) {
            console.log(data);
        })
      }
      //设置出战宠物
      var setFightPet = function(id) {
        pomelo.request("area.petHandler.setFightPet",{id : id}, function(data) {
            console.log(data);
        })
      }
      //宠物休息
      var petRest = function() {
        pomelo.request("area.petHandler.petRest",{}, function(data) {
            console.log(data);
        })
      }
      //获取宠物图鉴
      var getPetArchive = function() {
        pomelo.request("area.petHandler.getPetArchive",{}, function(data) {
            console.log(data);
        })
      }
      var variationCount = 0
      //宠物洗练
      var washPet = function(id) {
        pomelo.request("area.petHandler.washPet",{id : id}, function(data) {
            if(data.data.variation){
              variationCount++
              console.log("变异 ",variationCount,data)
              saveWashPet(id)
            }
        })
      }
      //保存洗练效果
      var saveWashPet = function(id) {
        pomelo.request("area.petHandler.saveWashPet",{id : id}, function(data) {
            console.log(data);
        })
      }
      //购买商城物品
      var buyShop = function(shopId,count) {
        pomelo.request("area.normalHandler.buyShop",{shopId : shopId,count : count}, function(data) {
            console.log(data);
        })
      }
    </script>
  </head>
  <body>
    <div class="g-doc">
      <div class="g-banner" style="border:none">
        <div class="logo">
          <div class="img"></div>
        </div>
      </div>
      <div class="g-background">
        <div class="g-content">
          Welcome to Pomelo
        </div>
      </div>
      <div class="g-link">
        Home:
        <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Test Game Server" onclick="show()"/>
      </div>
    </div>
  </body>
</html>
